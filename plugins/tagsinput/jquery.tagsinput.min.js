(function(a){var h=[],f=[];a.c.L=function(d){var b=a(this).data("minwidth"),c=a(this).data("maxwidth"),e="",g=a(this),f=a("#"+a(this).data("tester_id"));e!==(e=g.e())&&(e=e.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f.M(e),f=f.width(),d=f+d.l>=b?f+d.l:b,f=g.width(),(d<f&&d>=b||d>b&&d<c)&&g.width(d))};a.c.C=function(d){var b=a(this).data("minwidth")||d.T||a(this).width();d=a(this).data("maxwidth")||d.R||a(this).J(".tagsinput").width()-d.s;var c=a(this),e=a("<tester/>").d({position:"absolute",
top:-9999,left:-9999,width:"auto",fontSize:c.d("fontSize"),fontFamily:c.d("fontFamily"),fontWeight:c.d("fontWeight"),letterSpacing:c.d("letterSpacing"),whiteSpace:"nowrap"}),f=a(this).b("id")+"_autosize_tester";0<!a("#"+f).length&&(e.b("id",f),e.H("body"));c.data("minwidth",b);c.data("maxwidth",d);c.data("tester_id",f);c.d("width",b)};a.c.p=function(d){var b={focus:!1,k:!1},b=jQuery.extend({focus:!1,k:!0},b);this.m(function(){var c=a(this).b("id"),e=a(this).e().split(h[c]);""==e[0]&&(e=[]);d=jQuery.trim(d);
if(b.unique){var g=a(this).D(d);!0==g&&a("#"+c+"_tag").o("not_valid")}else g=!1;if(""!=d&&!0!=g&&(a("<span>").o("tag").append(a("<span>").text(d).append("&nbsp;&nbsp;"),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+c).A(escape(d))})).insertBefore("#"+c+"_addTag"),e.push(d),a("#"+c+"_tag").e(""),b.focus?a("#"+c+"_tag").focus():a("#"+c+"_tag").blur(),a.c.f.F(this,e),b.k&&f[c]&&f[c].onAddTag&&(g=f[c].onAddTag,g.call(this,d)),f[c]&&f[c].onChange)){var k=e.length,g=f[c].onChange;
g.call(this,a(this),e[k-1])}})};a.c.A=function(d){d=unescape(d);this.m(function(){var b=a(this).b("id"),c=a(this).e().split(h[b]);a("#"+b+"_tagsinput .tag").remove();str="";for(i=0;i<c.length;i++)c[i]!=d&&(str=str+h[b]+c[i]);a.c.f.h(this,str);f[b]&&f[b].onRemoveTag&&f[b].onRemoveTag.call(this,d)});return!1};a.c.D=function(d){var b=a(this).b("id"),b=a(this).e().split(h[b]);return 0<=jQuery.N(d,b)};a.c.h=function(d){id=a(this).b("id");a("#"+id+"_tagsinput .tag").remove();a.c.f.h(this,d)};a.c.f=function(d){var b=
jQuery.extend({n:!0,q:"add a tag",S:0,width:"300px",height:"100px",autocomplete:{W:!1},hide:!0,delimiter:",",unique:!0,B:!0,w:"#666666",I:!0,l:20,s:12},d);this.m(function(){b.r&&a(this).r();var c=a(this).b("id");if(!c||h[a(this).b("id")])c=a(this).b("id","tags"+(new Date).getTime()).b("id");var e=jQuery.extend({U:c,i:"#"+c,g:"#"+c+"_tagsinput",O:"#"+c+"_addTag",a:"#"+c+"_tag"},b);h[c]=e.K;if(b.t||b.v||b.u)f[c]=[],f[c].onAddTag=b.t,f[c].onRemoveTag=b.v,f[c].onChange=b.u;var d='<div id="'+c+'_tagsinput" class="tagsinput"><div id="'+
c+'_addTag">';b.n&&(d=d+'<input id="'+c+'_tag" value="" data-default="'+b.q+'" />');a(d+'</div><div class="tags_clear"></div></div>').P(this);a(e.g).d("width",b.width);a(e.g).d("min-height",b.height);a(e.g).d("height",b.height);""!=a(e.i).e()&&a.c.f.h(a(e.i),a(e.i).e());if(b.n){a(e.a).e(a(e.a).b("data-default"));a(e.a).d("color",b.w);a(e.a).C(b);a(e.g);a(e.a);if(void 0!=b.j){autocomplete_options={source:b.j};for(attrname in b.autocomplete)autocomplete_options[attrname]=b.autocomplete[attrname];void 0!==
jQuery.G?(a(e.a).autocomplete(b.j,b.autocomplete),a(e.a)):void 0!==jQuery.X.autocomplete&&(a(e.a).autocomplete(autocomplete_options),a(e.a))}else a(e.a);a(e.a);e.B&&a(e.a);a(e.a).blur();e.unique&&a(e.a).Q(function(b){(8==b.keyCode||String.fromCharCode(b.which).match(/\w+|[\u00c3\u00a1\u00c3\u00a9\u00c3\u00c3\u00b3\u00c3\u00ba\u00c3\u0081\u00c3\u2030\u00c3\u008d\u00c3\u201c\u00c3\u0161\u00c3\u00b1\u00c3\u2018,/]+/))&&a(this).V("not_valid")})}});return this};a.c.f.F=function(d,b){var c=a(d).b("id");
a(d).e(b.join(h[c]))};a.c.f.h=function(d,b){a(d).e("");var c=a(d).b("id"),e=b.split(h[c]);for(i=0;i<e.length;i++)a(d).p(e[i]);f[c]&&f[c].onChange&&f[c].onChange.call(d,d,e[i])}})(jQuery);
